# 🎨 Visual Workflow Guide

Complete visual representation of the DevOps workflow.

---

## 🔄 Complete DevOps Lifecycle

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         DEVELOPMENT PHASE                                    │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                    ┌───────────────┼───────────────┐
                    │               │               │
                    ▼               ▼               ▼
            ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
            │   Code       │ │  Dockerfile  │ │  K8s YAML    │
            │   HTML/CSS   │ │   nginx.conf │ │  Manifests   │
            └──────────────┘ └──────────────┘ └──────────────┘
                    │               │               │
                    └───────────────┼───────────────┘
                                    │
                                    ▼
                            ┌──────────────┐
                            │   Git Commit │
                            └──────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                         VERSION CONTROL (GITHUB)                             │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    │ git push
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                         CI/CD PIPELINE (GITHUB ACTIONS)                      │
│                                                                               │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  STAGE 1: BUILD                                                      │   │
│  │  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐       │   │
│  │  │Checkout│─▶│ Setup  │─▶│ Login  │─▶│Extract │─▶│ Build  │       │   │
│  │  │  Code  │  │Buildx  │  │  GHCR  │  │Metadata│  │ Image  │       │   │
│  │  └────────┘  └────────┘  └────────┘  └────────┘  └────────┘       │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    │                                         │
│                                    ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  STAGE 2: SECURITY                                                   │   │
│  │  ┌────────┐  ┌────────┐  ┌────────┐                                │   │
│  │  │  Run   │─▶│Generate│─▶│ Upload │                                │   │
│  │  │ Trivy  │  │ Report │  │  SARIF │                                │   │
│  │  └────────┘  └────────┘  └────────┘                                │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    │                                         │
│                                    ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  STAGE 3: PUSH                                                       │   │
│  │  ┌────────┐  ┌────────┐  ┌────────┐                                │   │
│  │  │  Tag   │─▶│  Push  │─▶│ Verify │                                │   │
│  │  │ Image  │  │  GHCR  │  │        │                                │   │
│  │  └────────┘  └────────┘  └────────┘                                │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    │                                         │
│                                    ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  STAGE 4: DEPLOY                                                     │   │
│  │  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐       │   │
│  │  │ Azure  │─▶│  Set   │─▶│ Create │─▶│ Update │─▶│ Apply  │       │   │
│  │  │ Login  │  │Context │  │ Secret │  │Manifest│  │  K8s   │       │   │
│  │  └────────┘  └────────┘  └────────┘  └────────┘  └────────┘       │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    │                                         │
│                                    ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  STAGE 5: VERIFY                                                     │   │
│  │  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐                    │   │
│  │  │Rollout │─▶│  Get   │─▶│  Get   │─▶│ Smoke  │                    │   │
│  │  │ Status │  │  Pods  │  │   IP   │  │  Test  │                    │   │
│  │  └────────┘  └────────┘  └────────┘  └────────┘                    │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                    CONTAINER REGISTRY (GHCR)                                 │
│                                                                               │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  ghcr.io/username/az900-portal:latest                                │   │
│  │  ghcr.io/username/az900-portal:main                                  │   │
│  │  ghcr.io/username/az900-portal:sha-abc123                            │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    │ Pull Image
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                         AZURE CLOUD (AKS)                                    │
│                                                                               │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                    Control Plane (Managed)                            │   │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐            │   │
│  │  │   API    │  │Scheduler │  │Controller│  │   etcd   │            │   │
│  │  │  Server  │  │          │  │ Manager  │  │          │            │   │
│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘            │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    │                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                    Worker Node (Standard_B2s)                         │   │
│  │                                                                        │   │
│  │  ┌──────────────────────────────────────────────────────────────┐   │   │
│  │  │              Namespace: production                            │   │   │
│  │  │                                                                │   │   │
│  │  │  ┌────────────────────────────────────────────────────────┐  │   │   │
│  │  │  │         Deployment: az900-portal                        │  │   │   │
│  │  │  │                                                          │  │   │   │
│  │  │  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │  │   │   │
│  │  │  │  │    Pod 1     │  │    Pod 2     │  │    Pod 3     │  │  │   │   │
│  │  │  │  │              │  │              │  │  (scaled)    │  │  │   │   │
│  │  │  │  │ ┌──────────┐ │  │ ┌──────────┐ │  │ ┌──────────┐ │  │  │   │   │
│  │  │  │  │ │Container │ │  │ │Container │ │  │ │Container │ │  │  │   │   │
│  │  │  │  │ │  Nginx   │ │  │ │  Nginx   │ │  │ │  Nginx   │ │  │  │   │   │
│  │  │  │  │ │  :8080   │ │  │ │  :8080   │ │  │ │  :8080   │ │  │  │   │   │
│  │  │  │  │ └──────────┘ │  │ └──────────┘ │  │ └──────────┘ │  │  │   │   │
│  │  │  │  └──────────────┘  └──────────────┘  └──────────────┘  │  │   │   │
│  │  │  │                                                          │  │   │   │
│  │  │  │  ┌────────────────────────────────────────────────────┐│  │   │   │
│  │  │  │  │  HPA: Monitors CPU/Memory, Scales 2-5 pods         ││  │   │   │
│  │  │  │  └────────────────────────────────────────────────────┘│  │   │   │
│  │  │  └────────────────────────────────────────────────────────┘  │   │   │
│  │  │                                                                │   │   │
│  │  │  ┌────────────────────────────────────────────────────────┐  │   │   │
│  │  │  │  Service: az900-portal-service (LoadBalancer)          │  │   │   │
│  │  │  │  Port: 80 → 8080                                       │  │   │   │
│  │  │  └────────────────────────────────────────────────────────┘  │   │   │
│  │  └──────────────────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    │                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │              Azure Load Balancer (Basic)                             │   │
│  │              Public IP: 20.123.45.67                                 │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    │ HTTP Request
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                         END USER (BROWSER)                                   │
│                                                                               │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                                                                       │   │
│  │    http://20.123.45.67                                               │   │
│  │                                                                       │   │
│  │    ┌──────────────────────────────────────────────────────────┐     │   │
│  │    │                                                           │     │   │
│  │    │         AZ-900 Practice Assessment Portal                │     │   │
│  │    │                                                           │     │   │
│  │    │         [Select Exam]  [Start Assessment]                │     │   │
│  │    │                                                           │     │   │
│  │    └──────────────────────────────────────────────────────────┘     │   │
│  │                                                                       │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 📊 Data Flow Diagram

```
┌──────────────┐
│  Developer   │
└──────┬───────┘
       │ 1. git push
       ▼
┌──────────────┐
│   GitHub     │
└──────┬───────┘
       │ 2. Trigger
       ▼
┌──────────────┐
│GitHub Actions│
└──────┬───────┘
       │ 3. Build
       ▼
┌──────────────┐
│Docker Image  │
└──────┬───────┘
       │ 4. Scan
       ▼
┌──────────────┐
│    Trivy     │
└──────┬───────┘
       │ 5. Push
       ▼
┌──────────────┐
│     GHCR     │
└──────┬───────┘
       │ 6. Deploy
       ▼
┌──────────────┐
│     AKS      │
└──────┬───────┘
       │ 7. Pull
       ▼
┌──────────────┐
│  Kubernetes  │
└──────┬───────┘
       │ 8. Create
       ▼
┌──────────────┐
│     Pods     │
└──────┬───────┘
       │ 9. Expose
       ▼
┌──────────────┐
│Load Balancer │
└──────┬───────┘
       │ 10. Access
       ▼
┌──────────────┐
│     User     │
└──────────────┘
```

---

## 🔄 Auto-Scaling Workflow

```
┌─────────────────────────────────────────────────────────────────┐
│  STEP 1: NORMAL OPERATION                                        │
│                                                                   │
│  Traffic: Low                                                     │
│  Pods: 2                                                          │
│  CPU: 30%                                                         │
│                                                                   │
│  ┌──────────┐  ┌──────────┐                                     │
│  │  Pod 1   │  │  Pod 2   │                                     │
│  └──────────┘  └──────────┘                                     │
└─────────────────────────────────────────────────────────────────┘
                        │
                        │ Traffic increases
                        ▼
┌─────────────────────────────────────────────────────────────────┐
│  STEP 2: HIGH LOAD DETECTED                                      │
│                                                                   │
│  Traffic: High                                                    │
│  Pods: 2                                                          │
│  CPU: 85% (> 70% threshold)                                      │
│                                                                   │
│  ┌──────────┐  ┌──────────┐                                     │
│  │  Pod 1   │  │  Pod 2   │                                     │
│  │ CPU: 85% │  │ CPU: 85% │                                     │
│  └──────────┘  └──────────┘                                     │
│                                                                   │
│  HPA: "Need more pods!"                                          │
└─────────────────────────────────────────────────────────────────┘
                        │
                        │ HPA scales up
                        ▼
┌─────────────────────────────────────────────────────────────────┐
│  STEP 3: SCALING UP                                              │
│                                                                   │
│  Traffic: High                                                    │
│  Pods: 2 → 4                                                     │
│  CPU: 85% → 45%                                                  │
│                                                                   │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐        │
│  │  Pod 1   │  │  Pod 2   │  │  Pod 3   │  │  Pod 4   │        │
│  │ CPU: 45% │  │ CPU: 45% │  │ CPU: 45% │  │ CPU: 45% │        │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘        │
│                                                                   │
│  HPA: "Load balanced!"                                           │
└─────────────────────────────────────────────────────────────────┘
                        │
                        │ Traffic decreases
                        ▼
┌─────────────────────────────────────────────────────────────────┐
│  STEP 4: LOW LOAD DETECTED                                       │
│                                                                   │
│  Traffic: Low                                                     │
│  Pods: 4                                                          │
│  CPU: 20% (< 70% threshold)                                      │
│                                                                   │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐        │
│  │  Pod 1   │  │  Pod 2   │  │  Pod 3   │  │  Pod 4   │        │
│  │ CPU: 20% │  │ CPU: 20% │  │ CPU: 20% │  │ CPU: 20% │        │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘        │
│                                                                   │
│  HPA: "Wait 5 minutes... then scale down"                        │
└─────────────────────────────────────────────────────────────────┘
                        │
                        │ After 5 minutes
                        ▼
┌─────────────────────────────────────────────────────────────────┐
│  STEP 5: SCALING DOWN                                            │
│                                                                   │
│  Traffic: Low                                                     │
│  Pods: 4 → 2                                                     │
│  CPU: 20% → 30%                                                  │
│                                                                   │
│  ┌──────────┐  ┌──────────┐                                     │
│  │  Pod 1   │  │  Pod 2   │                                     │
│  │ CPU: 30% │  │ CPU: 30% │                                     │
│  └──────────┘  └──────────┘                                     │
│                                                                   │
│  HPA: "Back to normal"                                           │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🛡️ Security Layers Visualization

```
┌─────────────────────────────────────────────────────────────────┐
│  LAYER 7: USER ACCESS                                            │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │  • Public IP (controlled access)                           │ │
│  │  • HTTPS (optional - can add cert-manager)                 │ │
│  └────────────────────────────────────────────────────────────┘ │
└───────────────────────────┬─────────────────────────────────────┘
                            │
┌─────────────────────────────────────────────────────────────────┐
│  LAYER 6: NETWORK SECURITY                                       │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │  • Azure Load Balancer (health checks)                     │ │
│  │  • Network Security Groups                                 │ │
│  │  • DDoS protection (Azure)                                 │ │
│  └────────────────────────────────────────────────────────────┘ │
└───────────────────────────┬─────────────────────────────────────┘
                            │
┌─────────────────────────────────────────────────────────────────┐
│  LAYER 5: KUBERNETES SECURITY                                    │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │  • Namespace isolation                                     │ │
│  │  • RBAC (Role-Based Access Control)                        │ │
│  │  • Resource limits (prevent DoS)                           │ │
│  │  • Network policies (optional)                             │ │
│  └────────────────────────────────────────────────────────────┘ │
└───────────────────────────┬─────────────────────────────────────┘
                            │
┌─────────────────────────────────────────────────────────────────┐
│  LAYER 4: POD SECURITY                                           │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │  • Security contexts (runAsNonRoot)                        │ │
│  │  • Read-only root filesystem                               │ │
│  │  • Drop all capabilities                                   │ │
│  │  • Secrets for credentials                                 │ │
│  └────────────────────────────────────────────────────────────┘ │
└───────────────────────────┬─────────────────────────────────────┘
                            │
┌─────────────────────────────────────────────────────────────────┐
│  LAYER 3: CONTAINER SECURITY                                     │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │  • Non-root user (UID 1001)                                │ │
│  │  • Minimal base image (Alpine)                             │ │
│  │  • No unnecessary packages                                 │ │
│  │  • Health checks                                           │ │
│  └────────────────────────────────────────────────────────────┘ │
└───────────────────────────┬─────────────────────────────────────┘
                            │
┌─────────────────────────────────────────────────────────────────┐
│  LAYER 2: IMAGE SECURITY                                         │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │  • Vulnerability scanning (Trivy)                          │ │
│  │  • Image signing (optional)                                │ │
│  │  • Specific version tags (no 'latest')                     │ │
│  │  • Trusted base images                                     │ │
│  └────────────────────────────────────────────────────────────┘ │
└───────────────────────────┬─────────────────────────────────────┘
                            │
┌─────────────────────────────────────────────────────────────────┐
│  LAYER 1: CODE SECURITY                                          │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │  • Code review (Pull Requests)                             │ │
│  │  • Static code analysis                                    │ │
│  │  • Dependency scanning                                     │ │
│  │  • No secrets in code                                      │ │
│  └────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

---

## 💰 Cost Optimization Decision Tree

```
                    ┌─────────────────┐
                    │  Need Container │
                    │    Registry?    │
                    └────────┬────────┘
                             │
                    ┌────────┴────────┐
                    │                 │
                    ▼                 ▼
            ┌──────────────┐  ┌──────────────┐
            │     ACR      │  │     GHCR     │
            │  $5/month    │  │     FREE     │
            └──────────────┘  └──────────────┘
                    │                 │
                    │                 │
                    └────────┬────────┘
                             │
                             ▼
                    ┌─────────────────┐
                    │ Need Load       │
                    │ Balancer?       │
                    └────────┬────────┘
                             │
                    ┌────────┴────────┐
                    │                 │
                    ▼                 ▼
            ┌──────────────┐  ┌──────────────┐
            │   Standard   │  │    Basic     │
            │  $18/month   │  │     FREE     │
            └──────────────┘  └──────────────┘
                    │                 │
                    │                 │
                    └────────┬────────┘
                             │
                             ▼
                    ┌─────────────────┐
                    │  Choose VM      │
                    │  Size?          │
                    └────────┬────────┘
                             │
                    ┌────────┴────────┐
                    │                 │
                    ▼                 ▼
            ┌──────────────┐  ┌──────────────┐
            │   D2s_v3     │  │     B2s      │
            │  $70/month   │  │  $30/month   │
            └──────────────┘  └──────────────┘
                    │                 │
                    │                 │
                    └────────┬────────┘
                             │
                             ▼
                    ┌─────────────────┐
                    │  How many       │
                    │  nodes?         │
                    └────────┬────────┘
                             │
                    ┌────────┴────────┐
                    │                 │
                    ▼                 ▼
            ┌──────────────┐  ┌──────────────┐
            │   3 nodes    │  │   1 node     │
            │  $90/month   │  │  $30/month   │
            └──────────────┘  └──────────────┘
                    │                 │
                    │                 │
                    └────────┬────────┘
                             │
                             ▼
                    ┌─────────────────┐
                    │   TOTAL COST    │
                    │                 │
                    │  Expensive:     │
                    │  $183/month     │
                    │                 │
                    │  Optimized:     │
                    │  $30/month      │
                    │                 │
                    │  SAVINGS:       │
                    │  $153/month     │
                    │  $1,836/year    │
                    └─────────────────┘
```

---

## 🎯 Deployment Options Comparison

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         OPTION 1: LOCAL DOCKER                               │
├─────────────────────────────────────────────────────────────────────────────┤
│  Time: 5 minutes                                                             │
│  Cost: FREE                                                                  │
│  Complexity: ⭐                                                              │
│                                                                               │
│  Developer → Docker → Container → localhost:8080                            │
│                                                                               │
│  ✅ Fastest setup                                                            │
│  ✅ No cloud costs                                                           │
│  ❌ Not accessible externally                                                │
│  ❌ No auto-scaling                                                          │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                    OPTION 2: LOCAL KUBERNETES                                │
├─────────────────────────────────────────────────────────────────────────────┤
│  Time: 10 minutes                                                            │
│  Cost: FREE                                                                  │
│  Complexity: ⭐⭐                                                            │
│                                                                               │
│  Developer → Docker → Kubernetes → localhost:8080                           │
│                                                                               │
│  ✅ Learn Kubernetes locally                                                 │
│  ✅ No cloud costs                                                           │
│  ✅ Test K8s manifests                                                       │
│  ❌ Not accessible externally                                                │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                    OPTION 3: AZURE AKS (MANUAL)                              │
├─────────────────────────────────────────────────────────────────────────────┤
│  Time: 15 minutes                                                            │
│  Cost: $30/month (FREE with credits)                                         │
│  Complexity: ⭐⭐⭐                                                          │
│                                                                               │
│  Developer → Docker → GHCR → AKS → Public IP                                │
│                                                                               │
│  ✅ Production-like environment                                              │
│  ✅ Publicly accessible                                                      │
│  ✅ Auto-scaling                                                             │
│  ❌ Manual deployment                                                        │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                 OPTION 4: AZURE AKS (CI/CD)                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│  Time: 20 minutes (setup once)                                               │
│  Cost: $30/month (FREE with credits)                                         │
│  Complexity: ⭐⭐⭐⭐                                                        │
│                                                                               │
│  Developer → Git → GitHub Actions → GHCR → AKS → Public IP                  │
│                                                                               │
│  ✅ Fully automated                                                          │
│  ✅ Production-ready                                                         │
│  ✅ Security scanning                                                        │
│  ✅ Best for resume                                                          │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 📈 Project Timeline

```
Week 1: Foundation
├── Day 1-2: Learn Docker basics
├── Day 3-4: Create Dockerfile
└── Day 5-7: Test locally

Week 2: Kubernetes
├── Day 1-3: Learn Kubernetes concepts
├── Day 4-5: Create K8s manifests
└── Day 6-7: Deploy to local K8s

Week 3: CI/CD
├── Day 1-2: Learn GitHub Actions
├── Day 3-5: Create CI/CD pipeline
└── Day 6-7: Test pipeline

Week 4: Azure & Polish
├── Day 1-3: Deploy to AKS
├── Day 4-5: Test and optimize
└── Day 6-7: Documentation
```

---

**💡 Use these diagrams in interviews to visualize your understanding!**
